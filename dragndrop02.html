<!DOCTYPE html>
<html lang="fr">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Drag & Drop 02</title>
        <script src="https://unpkg.com/draggabilly@3/dist/draggabilly.pkgd.min.js"></script>

        <style>
            body {
                margin: 0;
                width: 100%;
                height: 100vh;
                overflow: hidden;
                background: #f2f2f2;
            }

            header {
                width: 100%;
                height: 60px;
                background: black;
                position: relative;
                z-index: 10;
            }

            header p {
                color: white;
                margin: 0;
            }

            .carte {
                width: 600%;
                height: auto;
                position: absolute;
                cursor: move;
            }

            .container {
                position: relative;
                width: 100%;
                height: calc(100vh - 60px);
                /* Hauteur totale moins header */
                overflow: hidden;
            }
        </style>
    </head>

    <body>


        <header>
            <p>menu</p>
        </header>

        <div class="container">
            <img class="carte" src="images/carte.jpg" alt="" srcset="">
        </div>



        <script>
            document.addEventListener('DOMContentLoaded', function () {
                var elem = document.querySelector('.carte');
                var container = document.querySelector('.container');

                // Initialiser Draggabilly
                var draggie = new Draggabilly(elem, {
                    containment: '.container'
                });

                // Variables pour stocker les limites
                let minX, maxX, minY, maxY;

                // Fonction pour calculer les limites
                function calculateBounds() {
                    const containerRect = container.getBoundingClientRect();
                    const elemRect = elem.getBoundingClientRect();

                    minX = containerRect.width - elemRect.width;
                    maxX = 0;
                    minY = containerRect.height - elemRect.height;
                    maxY = 0;
                }

                // Calculer les limites initiales
                calculateBounds();

                // Mettre à jour la position pendant le déplacement
                draggie.on('dragMove', function (event, pointer, moveVector) {
                    var position = draggie.position;

                    // Limiter le déplacement horizontal
                    if (position.x < minX) draggie.setPosition(minX, position.y);
                    if (position.x > maxX) draggie.setPosition(maxX, position.y);

                    // Limiter le déplacement vertical
                    if (position.y < minY) draggie.setPosition(position.x, minY);
                    if (position.y > maxY) draggie.setPosition(position.x, maxY);
                });

                // Recalculer les limites lors du redimensionnement de la fenêtre
                window.addEventListener('resize', calculateBounds);
            });
        </script>

    </body>

</html>